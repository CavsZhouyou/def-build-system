Sending build context to Docker daemon  4.096kB
Step 1/10 : FROM node:latest as builder
 ---> 2f1ff44a8bb5
Step 2/10 : ENV PROJECT_ENV production
 ---> Running in 3ffdd41f7c54
Removing intermediate container 3ffdd41f7c54
 ---> bc64dd25f10e
Step 3/10 : ENV NODE_ENV production
 ---> Running in 34ba60ec2003
Removing intermediate container 34ba60ec2003
 ---> 74f6b0c8ac8b
Step 4/10 : RUN git clone http://192.168.3.61:10080/taobao-fe/def-deploy-demo.git
 ---> Running in 041b309f7770
[91mCloning into 'def-deploy-demo'...
[0mRemoving intermediate container 041b309f7770
 ---> 7b9c94c554f6
Step 5/10 : WORKDIR /def-deploy-demo
 ---> Running in 424a0e0dcc1d
Removing intermediate container 424a0e0dcc1d
 ---> b878cc9bc659
Step 6/10 : RUN git checkout daily/0.0.1 && npm config set registry https://registry.npm.taobao.org/
 ---> Running in 3df075545e0b
Branch daily/0.0.1 set up to track remote branch daily/0.0.1 from origin.
[91mSwitched to a new branch 'daily/0.0.1'
[0mRemoving intermediate container 3df075545e0b
 ---> 00dc135bcfaa
Step 7/10 : RUN npm install --production && npm run build
 ---> Running in 139d060c667a
[91mnpm WARN webpack-test@1.0.0 No repository field.
[0m[91mnpm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@1.2.12 (node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@1.2.12: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})
[0m[91m
[0madded 781 packages from 432 contributors in 21.972s

> webpack-test@1.0.0 build /def-deploy-demo
> webpack

[91mBrowserslist: caniuse-lite is outdated. Please run next command `npm update`
[0mHash: ba9247297560eea78e91
Version: webpack 4.41.1
Time: 2049ms
Built at: 04/15/2020 10:35:06 AM
               Asset        Size  Chunks                         Chunk Names
       ./css/app.css   753 bytes       0  [emitted]              app
./js/app.ba924729.js  1020 bytes       0  [emitted] [immutable]  app
          index.html    1.45 KiB          [emitted]              
Entrypoint app = ./css/app.css ./js/app.ba924729.js
[0] ./src/main.js 107 bytes {0} [built]
[1] ./src/style.css 39 bytes {0} [built]
    + 1 hidden module
Child html-webpack-plugin for "index.html":
     1 asset
    Entrypoint undefined = index.html
    [0] ./node_modules/html-webpack-plugin/lib/loader.js!./public/index.html 1.6 KiB {0} [built]
    [2] (webpack)/buildin/global.js 472 bytes {0} [built]
    [3] (webpack)/buildin/module.js 497 bytes {0} [built]
        + 1 hidden module
Child mini-css-extract-plugin node_modules/css-loader/dist/cjs.js!node_modules/postcss-loader/src/index.js!src/style.css:
    Entrypoint mini-css-extract-plugin = *
    [0] ./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/src!./src/style.css 938 bytes {0} [built]
        + 1 hidden module
Removing intermediate container 139d060c667a
 ---> 044fdbc100fb
Step 8/10 : FROM nginx:alpine
 ---> 48c8a7c47625
Step 9/10 : COPY --from=builder def-deploy-demo/dist /usr/share/nginx/html
 ---> Using cache
 ---> 426af09052a5
Step 10/10 : COPY --from=builder def-deploy-demo/nginx /etc/nginx/conf.d
 ---> Using cache
 ---> 4c903217a07c
Successfully built 4c903217a07c
Successfully tagged 192.168.3.61:5000/taobao-fe/def-deploy-demo:0.0.2
The push refers to repository [192.168.3.61:5000/taobao-fe/def-deploy-demo]
6ab513cb8dd4: Preparing
967bb700c850: Preparing
1d98ebade1db: Preparing
531743b7098c: Preparing
6ab513cb8dd4: Layer already exists
967bb700c850: Layer already exists
531743b7098c: Layer already exists
1d98ebade1db: Layer already exists
0.0.2: digest: sha256:17cc0d26651b2d8ffd37ea9770938ca43eb11a46da7182dcd9c382697d972be1 size: 1154
Deleted: sha256:044fdbc100fb2073ac87827ee3ae4e6230897f3ed01e4f88b71b5d025fc273bc
Deleted: sha256:e5a4c280f9e7b629094ddc6cbd544511f617cc6b3a8cc1f81fd4555f26d7a43e
Deleted: sha256:00dc135bcfaa20bb41fb1b6a389c00f4f80d4d4a0babba0843eb9f5be6a42f34
Deleted: sha256:c5d7d45cf45ca3ff345b6cabd58904bdf5337faf58c5ebcbe3c9d1303e2f7284
Deleted: sha256:b878cc9bc65946bdb7f3122785d67864b28b80ba89fc9f4792fa0e60f7335731
Deleted: sha256:7b9c94c554f68c45f97180198b83b587f1754ac8634427c6bd1365aa9f826701
Deleted: sha256:cc86e4c31c0531117534e062de27646dab8fbd8bfc845bb5dd955134b421a245
Deleted: sha256:74f6b0c8ac8ba03db659f47d90549cbcbc7a51afb435da97d908528af624193d
Deleted: sha256:bc64dd25f10e80b27d1d5a6c337ccbf74bfbb1ec8ebeb1696c7cabac372a9954
